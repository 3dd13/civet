<div class="row">
  <div class="col-lg-4 col-lg-offset-4">
    <ul class="nav nav-pills login-options">
      <li class="active">
        <a id="login-pill" href="#">Sign in</a>
      </li>
      <li>
        <a id="register-pill" href="#">Register</a>
      </li>
      <li>
        <a id="reset-pill" href="#">Reset Password</a>
      </li>
    </ul>
    <%= form_for :user, url: login_url, html: { role: "form", id: "loginform" } do |f| %>
      <div class="row">
        <div class="col-lg-8">
          <fieldset>
            <legend>Please sign in</legend>
            <div class="form-group">
              <%= f.label :email %>
              <%= f.text_field :email, class: "form-control", placeholder: "Email address" %>
            </div>
            <div class="form-group">
              <%= f.label :password, id: 'password-label' %>
              <%= f.password_field :password, class: "form-control showable-password", placeholder: "Password" %>
            </div>
            <div class="form-group">
              <%= f.submit "Sign in", class: "btn btn-success", id: 'submit-button' %>
              <button id="show-password-button" class="btn btn-warning" data-state="show">Show Password</button>
            </div>
          </fieldset>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
  $(function() {
  
    $('.login-options').children('li').children('a').on('click', function(e) {
      $('.login-options').find('li').removeClass('active');
      $(this).parent().addClass('active');
      
      switch ($(this)[0].id) {
        case 'register-pill':
          $('legend').html('Please enter your email');
          $('#password-label').hide();
          $('#user_password').hide();
          $('#show-password-button').hide();
          $('#submit-button').val('Register');
          break;
        case 'reset-pill':
          $('legend').html('Please enter your email');
          $('#password-label').hide();
          $('#user_password').hide();
          $('#show-password-button').hide();
          $('#submit-button').val('Reset');
          break;
        default:
          $('legend').html('Please sign in');
          $('#password-label').show();
          $('#user_password').show();
          $('#show-password-button').show();
          $('#submit-button').val('Sign in');
      }
      
      e.preventDefault();
    });
  
  });
</script>
  
<%= render partial: 'layouts/password' %>